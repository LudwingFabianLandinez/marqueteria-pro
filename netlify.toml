# SISTEMA DE GESTIÓN - MARQUETERÍA LA CHICA MORALES
# Configuración de Despliegue - Consolidación Final v13.3.68

[build]
  # Carpeta donde están tus archivos HTML, CSS y JS (Frontend)
  publish = "public"
  
  # Carpeta donde Netlify busca el backend (server.js)
  functions = "netlify/functions"

# --- REGLAS DE REDIRECCIÓN (Blindaje Anti-404) ---

# 1. Túnel Maestro: Conecta /api/* con tu función server.js
# Este gancho es vital para que las llamadas de api.js encuentren el motor
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/server/:splat"
  status = 200
  force = true

# 2. Manejo de SPA: Evita errores al recargar páginas internas del dashboard
# Permite que el diseño de dashboard.html sea persistente al refrescar
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# --- CONFIGURACIÓN DE FUNCIONES ---
[functions]
  node_bundle = true